@model IEnumerable<CrossSell_App.Models.ObjectivesModel>

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*<script src="~/Scripts/CustomScripts.js"></script>*@
<h2>Create</h2>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    var counter = 0;

                foreach (var item in ViewBag.SectionList)
                {
        counter++;
                    var secData = Model.Where(x => x.Metadata_Id == item.Metadata_Id).ToList();
        <table class="table" border="1" id=@counter>
            <tr>
                <th colspan="8">
                    @item.Metadata_Name
                </th>
            </tr>
            <tr>

                <th>Questions</th>
                <th>Comments</th>
                <th>Level</th>
                <th>Weight</th>
                <th>Answer(1-3)</th>
                <th>Score</th>
                <th>Max</th>
                <th>Score of Max</th>
            </tr>


            @foreach (CrossSell_App.Models.ObjectivesModel ques in secData)
            {
                var count =0;
                <tr class="objective_data">
                    <td id="QuestionText">
                        @Html.DisplayFor(modelitem => ques.QuestionText,"")
                    </td>
                    <td >
                        @Html.EditorFor(modelitem => ques.Comments, new { id = "ques_Comments"+ count, @class = "comments" })
                    </td>
                    <td >
                        @Html.EditorFor(modelitem => ques.Level, new { id = "ques_Level" + count, @class = "level" })
                    </td>
                    <td >
                        @Html.EditorFor(modelitem => ques.Weight, new { id = "ques_Weight" + count, @class = "weight" })
                    </td>
                    <td>
                        @Html.EditorFor(modelitem => ques.Answer, new { id = "ques_Answer" + count, @class = "answer" })
                    </td>
                    <td >
                        @Html.DisplayFor(modelitem => ques.Score, new { id = "ques_Score" + count, @class = "score" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelitem => ques.Max, new { id = "ques_Max" + count, @class = "max" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelitem => ques.Score_Max, new { id = "ques_Score_Max" + count, @class = "maxscore" })
                    </td>
                </tr>
                count++;

            }
                <tr>
                    <td colspan="5" id="total">
                        Total @item.Metadata_Name
                    </td>
                    <td id="total_score">
                        24
                    </td>
                    <td id="total_Max">
                        24
                    </td>
                    <td id="total_ScoreMax">
                        54%
                    </td>
                </tr>
        </table>

    }
}
<div>
    <input type="button" id="save_objective" />
    @Html.ActionLink("Back to List", "Index")
</div>

<script type="text/javascript">
    $(document).ready(function () {
       
        $("#save_objective").click(function () {
            alert("I am in custom script");
            $(".table").find('tr').each(function (i, el) {
                debugger;
                var $tds = $(this).find('td');
                if ($tds.prevObject[0].firstElementChild.tagName != 'TH') {
                  
                    
                    var obj = new Object();
           
                    obj.questions = $tds.eq(0).text();
                    obj.comments = $tds.eq(1).val();
                    obj.level = $tds.eq(2).text();
                    obj.weight = $tds.eq(3).text();
                    obj.answers = $tds.eq(4).text();
                    obj.score = $tds.eq(5).text();
                    obj.max = $tds.eq(6).text();
                    obj.max_score = $tds.eq(7).text();
                   // jsonObj.push(item);
                }
            });
            //$("tr.objective_data").each(function (i,el) {

            //    //var $row = $(row),

            //    //console.log($(this).text());
            //    var obj = new Object();
            //    debugger;
            //  //  obj.questions = $(this).find("input.name").val();
            //    obj.comments = $(this).find("input.ques.Comments").val();
            //    obj.level = $(this).find("input.level").val();
            //    obj.weight = $(this).find("input.weight").val();
            //    obj.answers = $(this).find("input.answer").val();
            //    obj.score = $(this).find("input.score").val();
            //    obj.max = $(this).find("input.max").val();
            //    obj.max_score = $(this).find("input.maxscore").val();



                

            //    //item = {}
            //    //item["title"] = id;
            //    //item["email"] = email;


            //    //$("tr.item").each(function () {
            //    //    var quantity1 = $(this).find("input.name").val(),
            //    //        quantity2 = $(this).find("input.id").val();
            //    //    console.log(quantity1);
            //    //    console.log(quantity2);
            //    //});

            //    //jsonObj.push(item);
            //});


        })
    })
</script>